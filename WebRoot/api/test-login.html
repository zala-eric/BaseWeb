<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>test-login.html</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../resource/plugins/artDialog/style.css" />
<script language="javascript" type="text/javascript" src="../resource/js/jquery-1.10.2.min.js"></script>
<script language="javascript" type="text/javascript" src="../resource/plugins/artDialog/jquery.artDialog.js"></script>
<script language="javascript" type="text/javascript" src="../resource/plugins/artDialog/plugins/iframeTools.js"></script>
	<STYLE>
		BODY {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		DIV {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		DL {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		DT {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		DD {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		UL {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		OL {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		LI {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		H1 {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		H2 {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		H3 {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		H4 {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		H5 {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		H6 {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		PRE {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		CODE {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		FORM {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		FIELDSET {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		LEGEND {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		INPUT {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		BUTTON {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		TEXTAREA {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		P {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		BLOCKQUOTE {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		TH {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		TD {PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px}
		FIELDSET {BORDER-LEFT-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-TOP-WIDTH: 0px}
		IMG {BORDER-LEFT-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-TOP-WIDTH: 0px}
		IMG {DISPLAY: inline-block}
		:focus {OUTLINE-WIDTH: 0px}
		ADDRESS {FONT-WEIGHT: normal; FONT-STYLE: normal}
		CAPTION {FONT-WEIGHT: normal; FONT-STYLE: normal}
		CITE {FONT-WEIGHT: normal; FONT-STYLE: normal}
		CODE {FONT-WEIGHT: normal; FONT-STYLE: normal}
		DFN {FONT-WEIGHT: normal; FONT-STYLE: normal}
		EM {FONT-WEIGHT: normal; FONT-STYLE: normal}
		STRONG {FONT-WEIGHT: normal; FONT-STYLE: normal}
		TH {FONT-WEIGHT: normal; FONT-STYLE: normal}
		VAR {FONT-WEIGHT: normal; FONT-STYLE: normal}
		OPTGROUP {FONT-WEIGHT: normal; FONT-STYLE: normal}
		H1 {FONT-SIZE: 100%; FONT-WEIGHT: normal}
		H2 {FONT-SIZE: 100%; FONT-WEIGHT: normal}
		H3 {FONT-SIZE: 100%; FONT-WEIGHT: normal}
		H4 {FONT-SIZE: 100%; FONT-WEIGHT: normal}
		H5 {FONT-SIZE: 100%; FONT-WEIGHT: normal}
		H6 {FONT-SIZE: 100%; FONT-WEIGHT: normal}
		ABBR {BORDER-LEFT-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px; FONT-VARIANT: normal; BORDER-BOTTOM-WIDTH: 0px; BORDER-TOP-WIDTH: 0px}
		ACRONYM {BORDER-LEFT-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px; FONT-VARIANT: normal; BORDER-BOTTOM-WIDTH: 0px; BORDER-TOP-WIDTH: 0px}
		INPUT {FONT-FAMILY: inherit}
		BUTTON {FONT-FAMILY: inherit}
		TEXTAREA {FONT-FAMILY: inherit}
		SELECT {FONT-FAMILY: inherit}
		OPTGROUP {FONT-FAMILY: inherit}
		OPTION {FONT-FAMILY: inherit}
		CODE {FONT-SIZE: 100%}
		KBD {FONT-SIZE: 100%}
		SAMP {FONT-SIZE: 100%}
		TT {FONT-SIZE: 100%}
		INPUT {FONT-SIZE: 100%}
		BUTTON {FONT-SIZE: 100%}
		TEXTAREA {FONT-SIZE: 100%}
		SELECT {FONT-SIZE: 100%}
		OL {LIST-STYLE: none none outside}
		UL {LIST-STYLE: none none outside}
		TABLE {BORDER-COLLAPSE: collapse; BORDER-SPACING: 0}
		CAPTION {TEXT-ALIGN: left}
		TH {TEXT-ALIGN: left}
		SUP {FONT-SIZE: 100%; VERTICAL-ALIGN: baseline}
		SUB {FONT-SIZE: 100%; VERTICAL-ALIGN: baseline}
		:link {TEXT-DECORATION: none}
		:visited {TEXT-DECORATION: none}
		INS {TEXT-DECORATION: none}
		BLOCKQUOTE {QUOTES: none}
		Q {QUOTES: none}
		BLOCKQUOTE:before {CONTENT: none}
		BLOCKQUOTE:after {CONTENT: none}
		Q:before {CONTENT: none}
		Q:after {CONTENT: none}
		HTML {BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px}
		BODY {BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px}
		BODY {FONT-SIZE: 75%; FONT-FAMILY: 'Microsoft Yahei', Tahoma, Arial !important; COLOR: #666; TEXT-ALIGN: center}
		A {COLOR: #214fa3}
		A:hover {TEXT-DECORATION: underline}
		#login-form {PADDING-TOP: 30px}
		#login-form P {PADDING-BOTTOM: 5px; PADDING-TOP: 5px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px}
		#login-form INPUT {BORDER-TOP: #ccc 1px solid; BORDER-RIGHT: #ccc 1px solid; BORDER-BOTTOM: #ccc 1px solid; PADDING-BOTTOM: 4px; PADDING-TOP: 4px; PADDING-LEFT: 4px; BORDER-LEFT: #ccc 1px solid; PADDING-RIGHT: 4px; WIDTH: 15em}
		#login-form INPUT:focus {BORDER-TOP-COLOR: #426dc9; BORDER-BOTTOM-COLOR: #426dc9; BORDER-RIGHT-COLOR: #426dc9; BORDER-LEFT-COLOR: #426dc9}
		#login-form .login-form-error {BORDER-TOP-COLOR: #f00 !important; BACKGROUND: #fffbfc; BORDER-BOTTOM-COLOR: #f00 !important; BORDER-RIGHT-COLOR: #f00 !important; BORDER-LEFT-COLOR: #f00 !important}
		</STYLE>
	</head>
	<BODY>
		<DIV  style="BACKGROUND: #fafbdd; PADDING-BOTTOM: 3px; PADDING-TOP: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px">
		<A  href="javascript:art.dialog.close();">iframe中关闭</A></DIV>
		<FORM id=login-form method=post action=../index.html?login target=_top>
		<P><LABEL>帐号：<INPUT id=login-form-username name=username></LABEL></P>
		<P><LABEL>密码：<INPUT id=login-form-password type=password 
		name=password></LABEL></P></FORM>
		<SCRIPT>
		(function () {
			var parent = art.dialog.parent,				// 父页面window对象
				api = art.dialog.open.api,	// 			art.dialog.open扩展方法
				$ = function (id) {return document.getElementById(id)},
				form = $('login-form'),
				username = $('login-form-username'),
				password = $('login-form-password');
			
			if (!api) return;
			
			parent.document.title = 'iframe中的javascirpt到此一游';
			
			// 操作对话框
			api.title('系统登录') // 自定义按钮
				.button( {
						name: '登录',
						callback: function () {
							if (check(username) && check(password)) form.submit();
							return false;
						}, focus: true }, { name: '取消' }
				);
			
			// 表单验证
			var check = function (input) {
				if (input.value === '') {
					inputError(input);
					input.focus();
					return false;
				} else {
					return true;
				};
			};
			
			// 输入错误提示
			var inputError = function (input) {
				clearTimeout(inputError.timer);
				var num = 0;
				var fn = function () {
					inputError.timer = setTimeout(function () {
						input.className = input.className === '' ? 'login-form-error' : '';
						if (num === 5) {
							input.className === '';
						} else {
							fn(num ++);
						};
					}, 150);
				};
				fn();
			};
			
			window.onload = function () {setTimeout(function () {username.focus()}, 240);};
		})();
		</SCRIPT>
	</BODY>

</HTML>